# 编译原理第4次作业

姓名:胡瑞康

学号:22336087

# Exercise 4.1

Given the following grammar
$$
S\to(L)|a
$$
$$
L\to L,S|S
$$
- Eliminate left recursions in the grammar.
- Draw the transition diagrams for the grammar
- Write a recursive descent predictive parser.
- Indicate the procedure call sequence for an input sentence $(a,(a,a))$.

## 消除左递归


原始文法为
$$
\begin{aligned}
S &\to (L) \;|\; a\\[1mm]
L &\to L,\,S \;|\; S
\end{aligned}
$$
其中产生式$L\to L,\,S$含有直接左递归。

利用消除左递归的标准方法，对于形如
$$
A\to A\alpha \;|\; \beta
$$
可改写为
$$
\begin{aligned}
A &\to \beta A'\\[1mm]
A' &\to \alpha A' \;|\; \epsilon
\end{aligned}
$$
因此令 $A = L$、$\beta = S$ 且 $\alpha = ,\,S$，得到消除左递归后的文法：

$$
\begin{aligned}
S &\to (L) \;|\; a\\[1mm]
L &\to S\,L'\\[1mm]
L' &\to ,\,S\,L' \;|\; \epsilon
\end{aligned}
$$

## 绘制状态图

$ S \to (L) \;|\; a $

![](./1.svg)

$ L \to S L' $

![](./2.svg)

$ L' \to , S L' \;|\; \epsilon\ $

![](./3.svg)


## Parser伪代码

```c
void S() {
    // S → ( L ) | a
    if (lookahead == '(') {
        match('(');
        L();
        match(')');
    } else if (lookahead == 'a') {
        match('a');
    } else {
        error();
    }
}
void L() {
    // L → S L'
    S();
    LPrime();
}
void LPrime() {
    // L' → , S L' | ε
    if (lookahead == ',') {
        match(',');
        S();
        LPrime();
    }
    // 如果不是逗号，直接 ε 返回
}
void match(char tok) {
    if (lookahead == tok) {
        lookahead = scanner.getNextToken();
    } else {
        error();
    }
}
```











# Exercise 4.2
Consider the context-free grammar
$$
S\to aSbS|bSaS|\varepsilon
$$
Can you construct a predictive parser for the grammar? and why?


# Exercise 4.3


Compute the FIRST and FOLLOW for the start symbol of the following grammar
$$
S\to S S +|S S *|a
$$
